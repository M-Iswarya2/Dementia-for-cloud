{% load static %}
<nav class="navbar">
    <div class="nav-left">
        <a href="{% url 'home' %}" class="logo">DementiaAI</a>
        <a href="{% url 'home' %}">Home</a>
        <a href="{% url 'home' %}#how-it-works" onclick="event.preventDefault(); scrollToSection('how-it-works');">
            How it Works
        </a>
        <a href="{% url 'about' %}">About</a>
        {% if user.is_authenticated %}
            <a href="{% url 'dashboard' %}">Dashboard</a>
        {% endif %}
    </div>

    <div class="nav-right">
        {% if user.is_authenticated %}
            <span class="user-name">Hi, {{ user.username }}</span>
            <a href="{% url 'logout' %}" class="login-btn">Logout</a>
            <a href="{% url 'take_test' %}" class="screen-btn">Start Screening</a>
        {% else %}
            <a href="{% url 'login' %}" class="login-btn">Login</a>
            <a href="{% url 'register' %}" class="register-btn" style="margin-right: 10px;">Sign Up</a>
            <a href="{% url 'take_test' %}" class="screen-btn">Start Screening</a>
        {% endif %}
    </div>
</nav>

<script>
    function scrollToSection(sectionId) {
        const currentPath = window.location.pathname;
        
        if (currentPath === '/' || currentPath === '/home/') {
            // Already on home, just scroll
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        } else {
            // Navigate to home with hash
            window.location.href = "{% url 'home' %}#" + sectionId;
        }
    }
    
    // Scroll to hash on page load
    window.addEventListener('load', function() {
        if (window.location.hash) {
            const sectionId = window.location.hash.substring(1);
            setTimeout(() => {
                const element = document.getElementById(sectionId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                }
            }, 100);
        }
    });
</script>